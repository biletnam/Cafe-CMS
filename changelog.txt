Cafe CMS
Список изменений в версиях

Версия 0.7.0
- добавлен класс /admin/inc/mysql.class.php для безопасной и удобной работы с
базой данных (взято с гитхаба: https://github.com/colshrapnel/safemysql);
- все модули переписаны для работы с этим классом;
- в панели управления для вывода содержимого применяются шаблоны.

Версия 0.6.4
- добавлен новый модуль "Каталог";
- исправления в файле стилей панели управления.


Версия 0.6.3
- добавлен новый модуль "Расписания";
- исправлена ошибка в верстке в модуле "Погода".


Версия 0.6.2
- добавлен новый модуль "Погода".


Версия 0.6.1
- исправлена дата в файле readme.txt;
- добавлена отсутствующая папка /upload с вложенными папками.


Версия 0.6.0
- проект размещен на гитхабе;
- "косметические" изменения в установщике;
- изменился дизайн панели управления;
- обновился шаблон сайта simple;
- удален лишний код;
- некторые файлы переместились в другие каталоги;
- и т. д.


Версия 0.5.1
- изменена структура таблицы _post_categories (удалено поле category);
- добавлена таблица _post_subcategories - в этой таблице будут храниться
подкатегории созданных разделов в модуле "Записи";
- модуль "Записи" переработан в связи с изменениями указанными выше.


Версия 0.5.0
- переписан установщик CMS;
- пароли шифруются используя алгоритм md5;
- в модуле авторизации добавлен подробный вывод ошибок и логирование;
- сортировка записей и комментариев;
- добавлена возможность редактирования комментариев в панели управления,
- модуль "Альбомы" объединен с модулем "Фотографии";
- файл /admin/inc/auth.php перемещен в папку модулей;
- изменена переменная для проверки авторизации в панели управления: раньше это
была переменная $user_status, которая должная была быть равной 1, теперь это
переменная $_SESSION['status'], должна быть равной 1 (админ) или 2 (модератор);
- комментирование записей;
- обновлен шаблон "simple";
- и т. д.


Версия 0.4.0
- переписана логика модулей: теперь у каждого модуля свое меню действий;
- новый модуль "Статистика" - добавлять счетчики стало удобно;
- новый универсальный модуль "Записи": можно добавлять свои разделы, например,
блог, новости, обзоры и т. д., для каждого раздела доступны свои категории;
количество разделов и категорий в них не ограничены.


Версия 0.3.0
- новый модуль "Пользователи": добавление, удаление, назначение прав;
- ограничение действий пользователей по правам;
- новый модуль "Журнал действий" - все действия пользователей в панели
управления записываются в журнал;
- оптимизация кода и запросов к бд;
- изменен способ защиты включаемых файлов: раньше это была переменная $cafe,
сейчас константа - define ("CAFE", '1');
- авторизация в панели управления теперь работает через сессии;
- вывод имени авторизованного пользователя и его статуса в панели управления;
- в установщике появилась проверка наличия файла /config.php, при его наличии
установка не будет возможна;
- оптимизировано подключение js-скриптов;
- загрузка файлов вынесена в функцию;
- обрезка фотографий и создание превью в фотоальбоме вынесены в функцию.


Версия 0.2.3
- оптимизация кода;
- вывод сообщений в панели управления при ошибках и успешных операциях;
- в некоторых местах изменена логика работы движка CMS.


Версия 0.2.2
- оптимизация кода;
- устранены мелкие ошибки.


Версия 0.2.1:
- исправлена ошибка в установщике.


Версия 0.2.0
- новые модули "Фотографии" и "Фотоальбом";
- исправлены мелкие ошибки.


Версия 0.1.6
- исправлена ошибка в модуле "Страницы".


Версия 0.1.5
- исправлена ошибка в установщике.


Версия 0.1.4
- исправлена ошибка с переадресацией при обновлении измененной страницы в
панели управления;
- исправлены мелкие ошибки в коде;
- если у страницы значение position равно нулю или неопределено, она не
выводится на сайте, а в панели управления выделяются серым цветом шрифта.
- исправлена ошибка с неправильным выбором темы оформления.


Версия 0.1.3
- в стилях добавлено правило @media; для монитора и принтера сделано разное
оформление страниц;
- деревовидный список страниц в панели управления;
- скрытые страницы в списке отображаются серым цветом;
- в панели управления раздел "Меню" совмещен с разделом "Страницы";
- тема оформления "default" удалена и больше поддерживаться не будет;
- косметические изменения в коде;
- страницы можно группировать по разделам/категориям, вложенность не ограничена.


Версия 0.1.2
- поля "Адрес страницы" и "Дата размещения" перемещены в блок дополнительных
полей, по умолчанию они скрыты;
- страницы можно группировать по разделам/категориям (пока только 1 уровень
вложенности);
- новое поле pid (parent id) в таблице _pages для группировки по разделам;
- список страниц в панели управления выводится в виде дерева;
- исправлена ошибка с переадресацией в Хроме;
- исправлены орфографические ошибки.


Версия 0.1.1
- добавились дополнительные поля при создании страниц для поисковой оптимизации:
ключевые слова и описание страницы;
- на страницах сайта в блоке <header> выводятся ключевые слова и описание
страницы;
- поле "Адрес страницы" формируется автоматически, если не было заполнено.


Версия 0.1.0
- код приведен в порядок (за основу взят стандарт Zend Framework);
- исправлена ошибка переадресации в модуле "Страницы";
- переработан шаблон "Simple";
- мелкие исправления в файлах шаблонв content.php;
- список страниц в панели управления сортируется так же как в меню - по номерам
в поле position;
- официальный сайт Cafe CMS теперь работает на Cafe CMS :-)


Версия 0.0.9
- исправлена проблема безопасности при обработке куки;
- панель управления разделена на модули (подробности в файле readme.txt);
- мелкие исправления в коде админки;
- в панели управления появился новый раздел "Меню". В нем можно отредактировать
положение пунктов меню (отсортировать);
- в таблице _pages появилось новое поле position для сортировки элементов в меню
сайта.


Версия 0.0.8
- мелкая оптимизация кода;
- отделение php-кода из шаблонов: контент страницы теперь формируется в файле
/index.php, в шаблоне остался только вывод переменных.


Версия 0.0.7
- исправлены ошибки в css-стилях шаблонов;
- изменен порядок сортировки элементов меню;
- исправлена ошибка с неавторизованным доступом (прямое скачивание) к
подключаемым файлам админки и шаблонам сайта (спасибо Роману за совет);
- устранена проблема безопасности в параметре $_GET['url'] - введенный адрес
теперь фильтруется на разрешенные символы;
- небольшие изменения в оформлении админки.


Версия 0.0.6
- изменен файл настроек /config.php. Все переменные теперь в виде констант;
- в /config.php добавлен новый параметр VERSION - текущая версия CMS;
- добавлена новая тема оформления Simple с вертикальным меню;
- убраны остатки отладочного кода.


Версия 0.0.5
- настройки сайта: в панели управления можно изменить основные параметры сайта;
все изменения сохраняются в файле /config.php, кроме логина и пароля - они
сохранятся в БД;
- исправлена ошибка, приводящая к перезаписи последней добавленной страницы, при
обновлении содержимого другой страницы.


Версия 0.0.4
- в админке header-часть верстки вынесена в файл /admin/inc/header.php. Она
включает doctype, открывающий тег html и блок head;
- исправлена ошибка с неправильном переходом к списку страниц после сохранения,
удаления или обновления страницы. Проблема была в неправильном символе "&"
записанном как "&amp;" в php-коде;
- для сохранения валидности верстки при сохранении и обновлении страницы тег
<br /> заменяется на <br>;
- убраны лишние отступы в файле /config.php
- вся html-верстка теперь соотвествует стандарту HTML 4.01 Strict;
- javascript плагины CKEditor и AjexFileManager загружаются только при создании
или редактировании страниц;
- на сайте теперь показывается меню; оно создается динамически из всех созданных
страниц. Подробнее читайте в файле readme.txt;
- в админке включена проверка на допустимые символы id-страницы, передаваемая с
помощью GET-запроса (разрешены только цифры);
- в файле /install.php оптимизирован sql-запрос для добавления первого
пользователя (администратора);
- оптимизирован код перевода даты в таймстамп;
- долгожданная защита addslashes;
- исправлены орфографические ошибки.


Версия 0.0.3
- мелкие изменения в коде;
- в админке добавлен режим просмотра содержимого страниц;
- подправлена html-верстка формы авторизации;
- в админке добавлен футер;
- в админке появилась ссылка для ручной проверки обновлений;
- исправлены орфографические ошибки.


Версия 0.0.2:
- убраны остатки отладочного кода;
- исправлены некоторые комментарии в коде;
- мелкие исправления кода;
- при установке в названии сайта теперь можно использовать тире и точку;
- в файле install.php исправлена ошибка с исчезающим футером;
- при неудачной установке добавлен вывод ошибок;
- в файле /index.php изменен способ проверки установленности CMS;
- теперь при авторизации в админке сразу выводится список страниц.


Версия 0.0.1
- да будет CMS!
